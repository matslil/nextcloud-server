File layout
===========

- boot-image.template.yaml - Describes what is needed to create Talos ID for the SecureBoot ISO image
- install-image.template.yaml - Describes what is needed to create the image to be stored persistently on the bare metal server
- Makefile - Targets to build ISO, perform image install and deploy containers

Testing
=======

The `test` target in `Makefile` should perform the following:

- Build ISO file
- Create a virtual machine with one boot disk and four data disks
- Boot ISO file in virtual machine
- Perform image install using `install` target in `Makefile`
- Perform deploy of containers using `deploy` target in `Makefile`
- Ensure NextCloud responds within a reasonable time frame

Disk layout
===========

First available disk should be used for root file system using default file system type.
Any remaining disks are to be used to build ZFS Raid 6 device.
Datasets are created from the ZFS device, at least one for each container, with options appropriate depending on expected usage from the container.

Secrets
=======

To support HTTPS, the root certificate needed to be installed into the browser need to be downloadable from the server with a pre-defined URL and name.
There is one shared encryption key for all datasets, generated by the `Makefile` and kept in the root of the build directory.
Secret to be used by `talosctl` command shall also be created by `Makefile` and kept in the root of the build directory.

Build directory layout
======================

Any files needed as cache only should be stored in `build` sub-directory.
Any files that are of interest to the user should be stored in the root directory of the build.

